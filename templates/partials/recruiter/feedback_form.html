{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluate - {{ candidate.name }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar matching your reference */
        .overflow-y-auto {
            scrollbar-width: thin;
            scrollbar-color: #cbd5e1 #f7fafc;
        }
        
        /* --- Django Form Widgets Styling --- 
           चूंकि Django {{ field }} को बिना क्लास के रेंडर करता है, 
           हम CSS से उन्हें Tailwind जैसा बना रहे हैं */
        form input[type="text"],
        form input[type="number"],
        form input[type="email"],
        form select,
        form textarea {
            width: 100%;
            border-radius: 0.375rem; /* rounded-md */
            border: 1px solid #d1d5db; /* border-gray-300 */
            padding: 0.5rem 0.75rem;
            margin-top: 0.25rem;
            outline: none;
            transition: border-color 0.2s;
        }
        form input:focus, form select:focus, form textarea:focus {
            border-color: #4f46e5; /* indigo-600 */
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    
    <div class="flex h-screen overflow-hidden">
        
        {% include 'partials/sidebar.html' %} 

        <div class="flex-1 flex flex-col overflow-hidden">
            
            {% include 'partials/header.html' with page_title="Evaluation | " job_title=candidate.name %}

            <main class="flex-1 overflow-y-auto p-6 bg-gray-50">
                
                <div class="max-w-3xl mx-auto">
                    
                    <div class="mb-6 flex items-center justify-between">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">Candidate Evaluation</h2>
                            <p class="text-sm text-gray-500 mt-1">
                                Evaluating for <span class="font-medium text-indigo-600">{{ candidate.job_post.title }}</span>
                            </p>
                        </div>
                        <a href="{% url 'candidate_list' job_pk=candidate.job_post.pk %}" 
                           class="text-sm text-gray-500 hover:text-gray-900 flex items-center">
                            ← Back to Candidate List
                        </a>
                    </div>

                    <div class="bg-white shadow rounded-lg overflow-hidden border border-gray-200">
                        
                        <div class="bg-gray-50 px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                            <div>
                                <span class="text-xs font-semibold tracking-wide uppercase text-gray-500">Candidate</span>
                                <h3 class="text-lg leading-6 font-medium text-gray-900">{{ candidate.name }}</h3>
                            </div>
                            <div class="text-right">
                                <span class="text-xs font-semibold tracking-wide uppercase text-gray-500">Current Round</span>
                                <span class="block px-2 py-1 text-xs font-bold rounded bg-indigo-100 text-indigo-800 mt-1">
                                    {{ current_round }}
                                </span>
                            </div>
                        </div>

                        <div class="p-6">
                            <form method="post" class="space-y-6">
                                {% csrf_token %}

                                {{ form.candidate_id }}

                                {% if form.non_field_errors %}
                                    <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-md">
                                        <div class="flex">
                                            <div class="flex-shrink-0">
                                                <svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                                </svg>
                                            </div>
                                            <div class="ml-3">
                                                <p class="text-sm text-red-700 font-medium">{{ form.non_field_errors.0 }}</p>
                                            </div>
                                        </div>
                                    </div>
                                {% endif %}

                                <div class="grid grid-cols-1 gap-y-6 gap-x-4">
                                    {% for field in form %}
                                        {% if field.name != 'candidate_id' %}
                                        <div class="relative">
                                            <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-1">
                                                {{ field.label }}
                                                {% if field.field.required %}<span class="text-red-500">*</span>{% endif %}
                                            </label>
                                            
                                            {{ field }}

                                            {% if field.help_text %}
                                                <p class="mt-1 text-xs text-gray-500">{{ field.help_text }}</p>
                                            {% endif %}

                                            {% if field.errors %}
                                                <p class="mt-1 text-sm text-red-600 flex items-center">
                                                    <svg class="h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
                                                    {{ field.errors.0 }}
                                                </p>
                                            {% endif %}
                                        </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>

                                <div class="pt-5 border-t border-gray-200 flex items-center justify-end space-x-3">
                                    <a href="{% url 'candidate_list' job_pk=candidate.job_post.pk %}" 
                                       class="px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                                        Cancel
                                    </a>
                                    <button type="submit" 
                                            class="px-4 py-2 bg-indigo-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 shadow-sm">
                                        Submit Evaluation
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
</body>
</html>