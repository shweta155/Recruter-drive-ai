{% extends "base.html" %} {% load static %} {% block content %}
<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
  <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8">
    <h1 class="text-3xl font-bold text-theme-dark mb-2">
      Create Private Test Link
    </h1>
    <p class="text-gray-600 mb-8">{{ paper.title }} ({{ paper.job_title }})</p>

    {% if messages %} {% for message in messages %}
    <div
      class="mb-4 p-4 rounded-lg {% if message.tags %}bg-{{ message.tags }}-50 text-{{ message.tags }}-800{% else %}bg-blue-50 text-blue-800{% endif %}"
    >
      {{ message }}
    </div>
    {% endfor %} {% endif %}

    <form method="post" class="space-y-6">
      {% csrf_token %}

      <!-- Link Name -->
      <div>
        <label
          for="{{ form.link_name.id_for_label }}"
          class="block text-sm font-semibold text-gray-700 mb-2"
        >
          Link Name <span class="text-red-600">*</span>
        </label>
        {{ form.link_name }} {% if form.link_name.errors %}
        <p class="text-red-600 text-sm mt-1">{{ form.link_name.errors.0 }}</p>
        {% endif %}
        <p class="text-gray-500 text-xs mt-1">
          Unique name to identify this link batch
        </p>
      </div>

      <!-- Allowed Emails -->
      <div>
        <label
          for="{{ form.allowed_emails.id_for_label }}"
          class="block text-sm font-semibold text-gray-700 mb-2"
        >
          Allowed Emails <span class="text-red-600">*</span>
        </label>
        {{ form.allowed_emails }} {% if form.allowed_emails.errors %}
        <p class="text-red-600 text-sm mt-1">
          {{ form.allowed_emails.errors.0 }}
        </p>
        {% endif %}
        <p class="text-gray-500 text-xs mt-1">
          Enter one email per line. Only these emails can access the test.
        </p>
      </div>

      <!-- Max Attempts -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label
            for="{{ form.max_attempts.id_for_label }}"
            class="block text-sm font-semibold text-gray-700 mb-2"
          >
            Max Attempts <span class="text-red-600">*</span>
          </label>
          {{ form.max_attempts }} {% if form.max_attempts.errors %}
          <p class="text-red-600 text-sm mt-1">
            {{ form.max_attempts.errors.0 }}
          </p>
          {% endif %}
        </div>

        <!-- Expires At -->
        <div>
          <label
            for="{{ form.expires_at.id_for_label }}"
            class="block text-sm font-semibold text-gray-700 mb-2"
          >
            Expires At (Optional)
          </label>
          {{ form.expires_at }} {% if form.expires_at.errors %}
          <p class="text-red-600 text-sm mt-1">
            {{ form.expires_at.errors.0 }}
          </p>
          {% endif %}
          <p class="text-gray-500 text-xs mt-1">Leave blank for no expiry</p>
        </div>
      </div>

      <!-- Buttons -->
      <div class="flex gap-4 pt-6">
        <button
          type="submit"
          class="flex-1 bg-green-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-green-700 transition"
        >
          ✅ Create Private Link
        </button>
        <a
          href="{% url 'paper_detail' paper.id %}"
          class="flex-1 bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg text-center hover:bg-gray-400 transition"
        >
          ← Cancel
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
